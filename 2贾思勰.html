<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>贾思勰 - 古代农业专家</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.1/echarts.min.js"></script>
    <style>
        /* 基础样式 */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
        }
        
        /* 左侧面板 */
        .left-panel {
            width: 28%;
            background-color: #f4f4f4;
            padding: 20px;
            box-sizing: border-box;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        .left-panel img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        .left-panel img:hover {
            transform: scale(1.02);
        }
        .left-panel ul {
            list-style: none;
            padding: 0;
        }
        .left-panel li {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s ease;
        }
        .left-panel li:hover {
            transform: translateX(5px);
        }

        /* 右侧主内容 */
        .right-panel {
            margin-left: 30%;
            padding: 40px;
            width: 70%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        /* 图表容器 */
        .chart-box {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* 生平时间轴 */
        #lifeTimeline {
            height: 400px;
        }

        /* 原始种植时间轴 */
        .original-timeline {
            position: relative;
            max-width: 600px;
            margin: 20px auto;
            padding: 20px 0;
        }
        .original-timeline::after {
            content: '';
            position: absolute;
            width: 4px;
            background-color: #4CAF50;
            top: 0;
            bottom: 0;
            left: 56%;
            margin-left: -2px;
        }
        .original-timeline-item {
            padding: 10px 40px;
            position: relative;
            width: 50%;
            cursor: pointer;
        }
        .original-timeline-item.left { left: 0; }
        .original-timeline-item.right { left: 50%; }
        .original-timeline-item::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            right: 0px;
            background-color: #fff;
            border: 4px solid #4CAF50;
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }
        .original-timeline-item.right::after { left: -8px; }
        .original-timeline-content {
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 6px;
        }
        .original-timeline-content h2 {
            margin: 0 0 10px 0;
            color: #4CAF50;
            font-size: 18px;
        }
        .original-hidden {
            display: none;
        }
        .original-timeline-content ul {
            margin: 0;
            padding-left: 20px;
        }
        .original-timeline-content li {
            list-style-type: disc;
            margin-bottom: 6px;
            font-size: 14px;
        }

        /* 新增时间轴容器样式 */
        .timeline-container {
            display: flex;
            width: 100%;
        }
        .timeline {
            position: relative;
            padding: 20px 0;
            width: 50%;
        }
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background-color: #333;
        }
        .video-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
            width: 100%;
        }
        .video-container video {
            width: 100%;
            height: 400px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .timeline-item { position: relative; margin-bottom: 30px; padding-left: 20px; }
        .timeline-item::before {
            content: '';
            position: absolute;
            top: 10px;
            left: -8px;
            width: 16px;
            height: 16px;
            background-color: #ff6347;
            border-radius: 50%;
            transition: background-color 0.3s;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* 新增文字样式 */
        .float-quote {
            position: relative;
            margin: 20px 0;
            width: 600px;
            max-width: 680px;
            padding: 20px;
            background: linear-gradient(145deg, #f8f5e6 0%, #fff9e6 100%);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(100,80,50,0.15);
            border: 1px solid rgba(180,160,120,0.2);
            font-family: 'Microsoft YaHei', '苹方-简', sans-serif;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .float-quote::before {
            content: "🌱";
            position: absolute;
            left: -15px;
            top: -15px;
            font-size: 28px;
            filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.1));
            animation: leaf-float 3s ease-in-out infinite;
        }

        .float-quote p {
            margin: 0;
            color: #4a4a36;
            font-size: 15px;
            line-height: 1.8;
            text-shadow: 0 1px 2px rgba(0,0,0,0.05);
            letter-spacing: 0.5px;
        }

        .float-quote em {
            display: block;
            margin-top: 12px;
            font-style: normal;
            color: #7d6b53;
            font-size: 13px;
            position: relative;
            padding-left: 24px;
        }

        .float-quote em::before {
            content: "「 ";
            color: #9e8c74;
            font-size: 16px;
            position: absolute;
            left: 0;
            top: 1px;
        }

        .float-quote em::after {
            content: " 」";
            color: #9e8c74;
            font-size: 16px;
        }

        @keyframes leaf-float {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-8px) rotate(5deg); }
        }
    </style>
</head>
<body>
    <!-- 左侧信息栏 -->
    <div class="left-panel">
        <img src="first/贾思勰.jpg" alt="贾思勰肖像">
        <h2>贾思勰 - 古代农业专家</h2>
        <ul>
            <li>📜 农业著作：著有《齐民要术》</li>
            <li>🌾 系统总结古代农业技术</li>
            <li>📊 详细分类农/牧/渔业</li>
            <li>🌱 提倡生态种植</li>
            <li>📚 推动农业技术传播</li>
        </ul>
    </div>

    <!-- 右侧内容 -->
    <div class="right-panel">
        <!-- 新增时间轴和视频容器 -->
        <div class="timeline-container">
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>约480年</h3>
                        <p>贾思勰出生</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>500年</h3>
                        <p>开始研究农业</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>540年</h3>
                        <p>完成《齐民要术》</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>550年</h3>
                        <p>逝世</p>
                    </div>
                </div>
            </div>
            <div class="video-container">
                <video src="first/贾思勰人物生平.mp4" controls></video>
            </div>
        </div>

        <!-- 生平时间轴 -->
        <div class="chart-box" id="lifeTimeline"></div>

        <!-- 著作分布饼图 -->
        <div class="chart-box" style="height:500px">
            <div id="mainChart" style="height:100%"></div>
        </div>

        <!-- 种植时间轴 -->
        <div class="chart-box">
            <div class="original-timeline">
                <div class="original-timeline-item left" onclick="toggleTimeline('正月')">
                    <div class="original-timeline-content">
                        <h2>正月</h2>
                        <p>点击查看可以种植的菜种类</p>
                        <div id="tl-正月" class="original-hidden">
                            <ul>
                                <li>瓜</li><li>瓠</li><li>葵</li><li>芥</li>
                                <li>大葱</li><li>小葱</li><li>苏</li>
                                <li>苜蓿</li><li>各种蒜</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="original-timeline-item right" onclick="toggleTimeline('六月六日')">
                    <div class="original-timeline-content">
                        <h2>六月六日</h2>
                        <p>点击查看可以种植的菜种类</p>
                        <div id="tl-六月六日" class="original-hidden">
                            <ul><li>葵菜</li></ul>
                        </div>
                    </div>
                </div>

                <div class="original-timeline-item left" onclick="toggleTimeline('中伏以后')">
                    <div class="original-timeline-content">
                        <h2>中伏以后</h2>
                        <p>点击查看可以种植的菜种类</p>
                        <div id="tl-中伏以后" class="original-hidden">
                            <ul><li>冬葵</li></ul>
                        </div>
                    </div>
                </div>

                <div class="original-timeline-item right" onclick="toggleTimeline('九月')">
                    <div class="original-timeline-content">
                        <h2>九月</h2>
                        <p>点击查看可以种植的菜种类</p>
                        <div id="tl-九月" class="original-hidden">
                            <ul>
                                <li>制作葵菜腌制品</li>
                                <li>晾干葵菜</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 新增文字部分 -->
        <div class="float-quote" style="width: 100%; padding: 20px; margin-top: 30px;">
            <p>
                《异物志》说：“稻，一年中夏、冬种两季，出在交趾。”
                <br>
                俞益期的书信中说：“交趾稻，一年两熟。”
                <br>
                《广志》曰：“梁禾，蔓生，实如葵子。米粉白如面，可为粥  。牛食以肥。六月种，九月熟。
                <br>
                感禾，扶疏生，实似大麦。
                <br>
                扬禾，似藋 ，粒细。左折右炊，停则牙生。此中国巴禾—木稷也 。
                <br>
                大禾，高丈余，子如小豆。出粟特国 。”
                <br>
                《山海经》曰  ：“昆仑墟 ……上有木禾，长五寻，大五围。”郭璞曰：“木禾，谷类也。”
                <br>
                《吕氏春秋》曰：“饭之美者，玄山之禾，不周之粟，阳山之穄。” 
                <br>
                《魏书》曰  ：“乌丸地宜青穄。” 
                <br>
                ......

            </p>
        </div>
    </div>

    <script>
        // 生平时间轴数据
        const lifeData = [
            { year: "约480年", event: "贾思勰出生", age: 0 },
            { year: "494年", event: "孝文帝改革", age: 14 },
            { year: "502年", event: "建立南朝梁", age: 22 },
            { year: "548年", event: "侯景之乱爆发", age: 68 },
            { year: "550年", event: "逝世", age: 70 }
        ];

        // 初始化生平时间轴
        const lifeChart = echarts.init(document.getElementById('lifeTimeline'));
        lifeChart.setOption({
            title: { text: '生活时间对应历史事件', left: 'center' },
            tooltip: {
                trigger: 'item',
                formatter: (params) => {
                    const data = lifeData.find(d => d.year === params.name);
                    return `${params.name}<br>${data.event}`;
                }
            },
            xAxis: {
                type: 'category',
                data: lifeData.map(d => d.year),
                axisLabel: {
                    rotate: 45,
                    formatter: function (value, index) {
                        return `${value}\n${lifeData[index].event}`;
                    }
                }
            },
            yAxis: {
                name: '年龄（岁）',
                type: 'value',
                nameLocation: 'middle',
                nameGap: 30
            },
            series: [{
                type: 'line',
                data: lifeData.map(d => d.age),
                smooth: true,
                lineStyle: { color: '#4CAF50', width: 3 },
                itemStyle: { color: '#4CAF50' },
                symbolSize: 12
            }]
        });

        // 著作分布饼图
        const mainChart = echarts.init(document.getElementById('mainChart'));
        mainChart.setOption({
            title: { text: '《齐民要术》篇数分布（详见目录）', left: 'center' },
            tooltip: {
                trigger: 'item',
                formatter: (params) => {
                    const details = {
                        '卷一': '3篇：耕田、收种、种谷',
                        '卷二': '13篇谷物种植技术',
                        '卷三': '13篇蔬菜栽培',
                        '卷四': '14篇园艺技术',
                        '卷五': '11篇林木培育',
                        '卷六': '6篇畜牧养殖',
                        '卷七': '6篇酿酒工艺',
                        '卷八': '13篇食品加工',
                        '卷九': '9篇烹饪技法',
                        '卷十': '1篇异域作物'
                    };
                    return `${params.name}<br>${details[params.name]}`;
                }
            },
            series: [{
                type: 'pie',
                radius: '55%',
                data: [
                    {value:3, name:'卷一',itemStyle:{color:'#FFB6C1'}},
                    {value:13, name:'卷二',itemStyle:{color:'#87CEFA'}},
                    {value:13, name:'卷三',itemStyle:{color:'#98FB98'}},
                    {value:14, name:'卷四',itemStyle:{color:'#FFDAB9'}},
                    {value:11, name:'卷五',itemStyle:{color:'#D8BFD8'}},
                    {value:6, name:'卷六',itemStyle:{color:'#CD853F'}},
                    {value:6, name:'卷七',itemStyle:{color:'#20B2AA'}},
                    {value:13, name:'卷八',itemStyle:{color:'#778899'}},
                    {value:9, name:'卷九',itemStyle:{color:'#DAA520'}},
                    {value:1, name:'卷十',itemStyle:{color:'#BC8F8F'}}
                ]
            }]
        });

        // 时间轴交互
        function toggleTimeline(id) {
            const target = document.getElementById(`tl-${id}`);
            const isVisible = target.style.display === 'block';
            
            document.querySelectorAll('.original-hidden').forEach(el => {
                el.style.display = 'none';
            });
            
            target.style.display = isVisible ? 'none' : 'block';
        }

        // 响应式调整
        window.onresize = () => {
            lifeChart.resize();
            mainChart.resize();
        };
    </script>
</body>
</html>