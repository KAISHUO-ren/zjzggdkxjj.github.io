<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŒ…ä¸–è‡£ - å¤ä»£å†œä¸šä¸“å®¶</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.1/echarts.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
        }
        .left-panel {
            width: 28%;
            background-color: #f4f4f4;
            padding: 20px;
            box-sizing: border-box;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        .left-panel img {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .left-panel img:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .right-panel {
            margin-left: 30%;
            padding: 20px;
            box-sizing: border-box;
            padding-left: 40px; /* Space from fixed left panel */
            display: flex;
            flex-direction: column;
        }
        .timeline-container {
            display: flex;
            flex: 1;
            margin-bottom: 20px;
        }
        .timeline {
            flex: 1;
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background-color: #333;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            top: 10px;
            left: -8px;
            width: 16px;
            height: 16px;
            background-color: #ff6347;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .timeline-item:hover::before {
            background-color: #ff4500;
        }
        .timeline-content {
            transition: all 0.3s ease;
            transform-origin: left center;
            opacity: 0.95;
        }
        .timeline-content:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            opacity: 1;
        }
        .books-section {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
        }
        .book-info {
            width: 45%;
        }
        .book-info img {
            max-width: 100%;
            height: auto;
        }
        .clearfix::after {
            content: "";
            display: table;
            clear: both;
        }
        .book-images img {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .book-images img:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .left-panel ul li {
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .left-panel ul li:hover {
            background-color: rgba(255,99,71,0.1);
            transform: translateX(5px);
        }

        /* æ—¶é—´è½´ç‚¹åŠ¨ç”» */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .timeline-item::before {
            animation: pulse 2s infinite;
        }
        .timeline-item:hover::before {
            animation: none;
            transform: scale(1.3);
        }

        /* ä¼˜åŒ–åŸæœ‰è¿‡æ¸¡æ•ˆæœ */
        .timeline-item::before {
            transition: all 0.3s ease;
        }

        /* è§†é¢‘æ ·å¼ */
        .video-container {
            width: 400px;
            height: 500px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            margin-left: 20px;
        }
        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* æ–°å¢å¤ä»£é£æ–‡å­—æ ·å¼ */
        .ancient-text {
            margin-top: 40px;
            padding: 20px;
            background-color: #f9f3e6;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            font-family: "SimSun", "å®‹ä½“", serif;
            line-height: 1.8;
            border: 1px solid #d1b284;
            position: relative;
        }
        .ancient-text::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(to bottom, #d1b284, transparent);
            z-index: 1;
        }
        .ancient-text::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(to top, #d1b284, transparent);
            z-index: 1;
        }
        .ancient-text h3 {
            color: #866a41;
            text-align: center;
            margin-bottom: 15px;
            font-weight: normal;
            font-style: italic;
        }
        .ancient-text p {
            white-space: pre-line;
            color: #5d4a30;
            font-size: 16px;
        }
    </style>
</head>
<body>

<div class="left-panel">
    <img src="first/åŒ…ä¸–è‡£.jpg" 
            style="width: 300px;height: 400px;object-fit:cover;border-radius:8px;">
    <h2>åŒ…ä¸–è‡£ - å¤ä»£å†œä¸šä¸“å®¶</h2>
    <ul>
        <li>ğŸ“œ å†œä¸šæ”¹é©ï¼šæå‡ºå¤šé¡¹å†œä¸šæ”¹é©æªæ–½ï¼Œæé«˜å†œä¸šç”Ÿäº§æ•ˆç‡</li>
        <li>ğŸ“Š å†œä¸šæ•°æ®åˆ†æï¼šå¯¹å†œä¸šç”¨åœ°å’Œäººå£æ•°é‡è¿›è¡Œè¯¦ç»†ç»Ÿè®¡å’Œåˆ†æ</li>
        <li>ğŸŒ¾ æ¨å¹¿å…ˆè¿›å†œä¸šæŠ€æœ¯ï¼šæ¨å¹¿å…ˆè¿›çš„è€•ä½œæŠ€æœ¯å’Œæ°´åˆ©å·¥ç¨‹</li>
        <li>ğŸ“š å†œä¸šè‘—ä½œï¼šè‘—æœ‰ã€Šé½æ°‘å››æœ¯ã€‹ï¼Œç³»ç»Ÿé˜è¿°å†œä¸šç†è®ºå’Œå®è·µ</li>
        <li>ğŸŒ± ç”Ÿæ€å†œä¸šï¼šæå€¡ç”Ÿæ€å†œä¸šï¼Œå¼ºè°ƒäººä¸è‡ªç„¶çš„å’Œè°å…±ç”Ÿ</li>
    </ul>
</div>

<div class="right-panel">
    <div class="timeline-container">
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>1775å¹´</h3>
                    <p>åŒ…ä¸–è‡£å‡ºç”Ÿ</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>1800å¹´</h3>
                    <p>å¼€å§‹ç ”ç©¶å†œä¸š</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>1810å¹´</h3>
                    <p>è‘—ã€Šé½æ°‘å››æœ¯ã€‹</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>1814å¹´</h3>
                    <p>ä¸Šä¹¦ä¸¤æ±Ÿæ€»ç£ç™¾é¾„ï¼Œä¿ƒå…¶è®¾æ³•æ‹¯æ•‘ç¾æ°‘</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>1838å¹´</h3>
                    <p>æ—åˆ™å¾å‘åŒ…ä¸–è‡£è¯·æ•™ç¦çƒŸä¹‹æ³•</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>1855å¹´</h3>
                    <p>åŒ…ä¸–è‡£é€ä¸–</p>
                </div>
            </div>
        </div>

        <!-- æ·»åŠ è§†é¢‘å®¹å™¨ -->
        <div class="video-container">
            <video controls>
                <source src="first/åŒ…ä¸–è‡£ç”Ÿå¹³.mp4" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾ã€‚
            </video>
        </div>
    </div>

    <div id="chart-container" style="height: 500px; background: white; width: 900px; border-radius: 10px; padding: 15px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);"></div>
    <div id="chart-container2" style="flex: 1;height: 600px;width: 900px; background: white; border-radius: 10px; padding: 15px; min-height: 400px; border: 1px solid #ddd; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"></div>

    <!-- æ–°å¢å¤ä»£é£æ–‡å­—åŒºåŸŸ -->
    <div class="ancient-text">
        <h3>å¤ä»£å†œä¸šç–†åŸŸä¸è€•åœ°</h3>
        <p>å†…åœ°ï¼ŒåŒ—è‡³äºé•¿åŸï¼Œè¥¿æŠµå˜‰å³ªå…³ï¼Œä¸œè‡³å¤§æµ·ï¼Œå—æ¥è¥¿å—è¾¹å¢ƒï¼Œå…¶å¯ç›´æ¥è¯¾ç¨å¾å½¹ä¹‹ç‹æ²»ä¹‹åœ°ï¼Œæ€»è®¡çº¦ä¸‰åƒå…­ç™¾é‡Œè§æ–¹ï¼ŒæŠ˜äº©è®¡ä¹‹ï¼Œçº¦å…­åƒå…«ç™¾å…­åå…«ä¸‡å…«åƒäº©ã€‚å…¶ä¸­ï¼Œå±±ã€æ°´ã€åŸé•‡ã€æ‘è½ç­‰éè€•åœ°æ‰€å ï¼Œçº¦å»å…¶å››æˆï¼Œåˆ™ä½™å¯è€•ä¹‹åœ°ï¼Œçº¦å››åƒä¸€ç™¾äºŒåä¸€ä¸‡äºŒåƒå…«ç™¾äº©ä¹Ÿã€‚</p>
        <p>å‰æ­¤å…µé©æœªèµ·ï¼Œæˆ·å£æç››æ—¶ï¼Œä¸ºäººä¸ƒä¸‡ä¸‡ä½™å£ã€‚</p>
    </div>
</div>

<script>
// åŒ…ä¸–è‡£ç”Ÿå¹³æ—¶é—´è½´æ•°æ®
const lifeData = [
    { year: "1775å¹´", event: "å‡ºç”Ÿ", value: 0 },
    { year: "1796å¹´", event: "ç™½è²æ•™èµ·ä¹‰", value: 21 },
    { year: "1840å¹´", event: "é¸¦ç‰‡æˆ˜äº‰,è‹±å›½èˆ°é˜Ÿå°é”ç æ±Ÿå£", value: 65 },
    { year: "1842å¹´", event: "æ¸…æ”¿åºœä¸è‹±å›½ç­¾è®¢ã€Šå—äº¬æ¡çº¦ã€‹", value: 67 },
    { year: "1851å¹´", event: "æ´ªç§€å…¨-â€œé‡‘ç”°èµ·ä¹‰â€", value:76  },
    { year: "1855å¹´", event: "é€ä¸–", value:80  }
];

// åˆå§‹åŒ–æ—¶é—´è½´å›¾è¡¨
const chart = echarts.init(document.getElementById('chart-container'));
chart.setOption({
    tooltip: { 
        trigger: 'item',
        formatter: (params) => {
            const eventData = lifeData.find(d => d.year === params.name);
            return `${"çº¦" + params.name}<br>äº‹ä»¶ï¼š${eventData.event}`;
        }
    },
    xAxis: {
        type: 'category',
        data: lifeData.map(d => d.year),
        axisLabel: {
            rotate: 45,
            formatter: function (value, index) {
                return `${value}\n${lifeData[index].event}`;
            }
        }
    },
    yAxis: { 
        show: true,
        name: 'å¹´é¾„ï¼ˆå²ï¼‰',
        type: 'value',
        nameLocation: 'middle',
        nameGap: 30,
        axisLabel: {
            formatter: '{value}'
        }
    },
    series: [{
        type: 'line',
        data: lifeData.map(d => d.value),
        smooth: true,
        lineStyle: { color: '#2b5b84', width: 3 },
        itemStyle: { color: '#2b5b84' },
        symbolSize: 12
    }]
});

// ========== æ•°æ®æ¯”è¾ƒå›¾è¡¨ ==========
const chart2 = echarts.init(document.getElementById('chart-container2'));
const landData = [
    { category: "æ¨æµ‹å†œä¸šè€•åœ°æ•°æ®", åŒ…ä¸–è‡£: 4121280000, ç°ä»£: 1071000000 },
    { category: "ç››ä¸–äººå£", åŒ…ä¸–è‡£: 700000000, ç°ä»£: 400000000 }
];

chart2.setOption({
    tooltip: { 
        trigger: 'axis',
        axisPointer: { type: 'shadow' }
    },
    legend: {
        data: ['åŒ…ä¸–è‡£ä¼°è®¡', 'ç°ä»£æ¨æµ‹'],
        top: 20
    },
    xAxis: {
        type: 'category',
        data: landData.map(d => d.category),
        axisLabel: {
            rotate: 45
        }
    },
    yAxis: {
        type: 'value',
        name: 'é¢ç§¯ï¼ˆäº©ï¼‰ / äººå£ï¼ˆäººï¼‰',
        axisLabel: {
            formatter: function (value) {
                return value.toLocaleString();
            }
        }
    },
    series: [
        {
            name: 'åŒ…ä¸–è‡£',
            type: 'bar',
            data: [landData[0].åŒ…ä¸–è‡£, landData[1].åŒ…ä¸–è‡£],
            itemStyle: { color: '#2b5b84' }
        },
        {
            name: 'ç°ä»£',
            type: 'bar',
            data: [landData[0].ç°ä»£, landData[1].ç°ä»£],
            itemStyle: { color: '#c13a3a' }
        }
    ]
});

// æ‚¬æµ®æç¤ºäº¤äº’
const tooltip = d3.select(".tooltip");

chart2.on("mouseover", function(event) {
    const tooltip = d3.select(".tooltip");
    const [x, y] = [event.clientX, event.clientY];
    const winWidth = window.innerWidth;
    const winHeight = window.innerHeight;
    
    let posX = x + 20;
    let posY = y;
    
    if (posX + 280 > winWidth) {
        posX = x - 280 - 30;
        tooltip.style("transform", "translate(-15px, -50%)")
               .style("right", winWidth - x + 15 + "px")
               .style("left", null);
    } else {
        tooltip.style("transform", "translate(15px, -50%)")
               .style("left", posX + "px")
               .style("right", null);
    }

    if (posY + 150 > winHeight) posY = winHeight - 150;

    tooltip.style("opacity", 1)
           .style("top", posY + "px")
           .html(`<strong style="color:#2b5b84;font-size:16px;">åŒ…ä¸–è‡£</strong>
                 <hr>
                 <div style="color:#666;">
                   <em style="display:block;margin-bottom:6px;">æ¨æµ‹æ•°æ®</em>
                   å†œä¸šç”¨åœ°:4,121,280,000äº©<br>
                   ç››ä¸–äººå£ï¼šä¸ƒäº¿
                 </div>
                 <div style="color:#666;">
                   <em style="display:block;margin-bottom:6px;">ç°ä»£æ¨æµ‹æ•°æ®</em>
                   å†œä¸šç”¨åœ°:1,071,000,000äº©<br>
                   ç››ä¸–äººå£ï¼šå››äº¿
                 </div>`);
});

chart2.on("mouseout", function() {
    d3.select(".tooltip").style("opacity",0);
});

// å“åº”å¼è®¾è®¡
window.onresize = () => {
    chart.resize();
    chart2.resize();
};
</script>
</body>
</html>