<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å®‹åº”æ˜Ÿ - å¤ä»£ç§‘å­¦å®¶</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.1/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
        }
        .left-panel {
            width: 30%;
            background-color: #f4f4f4;
            padding: 20px;
            box-sizing: border-box;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        .left-panel img {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .left-panel img:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .right-panel {
            margin-left: 30%;
            width: 70%;
            padding: 20px;
            box-sizing: border-box;
            padding-left: 40px;
            height: calc(100vh - 40px);
            overflow-y: auto;
        }
        .section-box {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            position: relative;
        }
        #timeline-container {
            height: 300px;
        }
        #grain-info-container {
            min-height: 400px;
        }
        #piechart-container {
            height: 500px;
            position: relative;
        }
        .color-box {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 5px;
            border: 1px solid #ccc;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .left-panel ul li {
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .left-panel ul li:hover {
            background-color: rgba(255,99,71,0.1);
            transform: translateX(5px);
        }
        .timeline {
            position: relative;
            padding: 20px 0;
        }
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background-color: #333;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            top: 10px;
            left: -8px;
            width: 16px;
            height: 16px;
            background-color: #ff6347;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s;
            animation: pulse 2s infinite;
        }
        .timeline-item:hover::before {
            background-color: #ff4500;
            animation: none;
            transform: scale(1.3);
        }
        .timeline-content {
            transition: all 0.3s ease;
            transform-origin: left center;
            opacity: 0.95;
        }
        .timeline-content:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            opacity: 1;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        /* æ–°å¢è§†é¢‘å®¹å™¨æ ·å¼ */
        .video-container {
            width: 50%;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            margin-top: 20px;
            margin-left: 20px;
            float: right;
        }
        video {
            width: 100%;
            height: 100%;
            border-radius: 0px;
        }
        /* æ°´ç¨»è§†é¢‘èƒŒæ™¯æ ·å¼ */
        .rice-video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.3;
            z-index: -1;
        }
        /* æ–°å¢çš„åˆ†åˆ—æ–‡å­—æ ·å¼ */
        .column-text {
            position: absolute;
            right: 350px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }
        .text-column {
            opacity: 0;
            transition: opacity 1s ease;
            line-height: 1.6;
            font-size: 16px;
            text-align: right;
            font-family: "SimSun", "KaiTi", serif;
            color: #555;
            border-left: 2px solid #e0e0e0;
            padding-left: 15px;
            margin-left: 15px;
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

<div class="left-panel">
    <img src="second/å®‹åº”æ˜Ÿ.jpg" style="width: 300px;height: 400px;object-fit:cover;border-radius:8px;">
    <h2>å®‹åº”æ˜Ÿ - å¤ä»£ç§‘å­¦å®¶</h2>
    <ul>
        <li>ğŸ“œ ç§‘å­¦è‘—ä½œï¼šè‘—æœ‰ã€Šå¤©å·¥å¼€ç‰©ã€‹ï¼Œç³»ç»Ÿè®°å½•äº†ä¸­å›½å¤ä»£çš„æŠ€æœ¯å’Œå·¥è‰º</li>
        <li>ğŸ“Š å†œä¸šæŠ€æœ¯ï¼šè¯¦ç»†è®°å½•äº†å†œä¸šç”Ÿäº§çš„å„ä¸ªç¯èŠ‚å’ŒæŠ€æœ¯</li>
        <li>ğŸŒ¾ å·¥ä¸šæŠ€æœ¯ï¼šè®°å½•äº†çººç»‡ã€å†¶é‡‘ã€é™¶ç“·ç­‰å·¥ä¸šæŠ€æœ¯</li>
        <li>ğŸ“š ç™¾ç§‘å…¨ä¹¦ï¼šæ¶µç›–äº†å†œä¸šã€æ‰‹å·¥ä¸šã€çŸ¿ä¸šç­‰å¤šä¸ªé¢†åŸŸ</li>
        <li>ğŸŒ± ç§‘å­¦ç²¾ç¥ï¼šå¼ºè°ƒå®è·µå’Œè§‚å¯Ÿï¼Œæå€¡ç§‘å­¦ç²¾ç¥</li>
    </ul>
</div>

<div class="right-panel">
    <!-- æ–°å¢çš„ç«–ç›´ç”Ÿå¹³è½´ -->
    <div class="section-box" style="display: flex;">
        <div style="flex: 1;">
            <h2>å®‹åº”æ˜Ÿç”Ÿå¹³æ—¶é—´è½´</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>1587å¹´</h3>
                        <p>å®‹åº”æ˜Ÿå‡ºç”Ÿ</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>1615å¹´</h3>
                        <p>å¼€å§‹ç§‘å­¦ç ”ç©¶</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>1637å¹´</h3>
                        <p>è‘—ã€Šå¤©å·¥å¼€ç‰©ã€‹</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>1644å¹´</h3>
                        <p>æ˜æœç­äº¡</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>1666å¹´</h3>
                        <p>å®‹åº”æ˜Ÿé€ä¸–</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="video-container">
            <video controls id="scroll-video">
                <source src="second/å®‹åº”æ˜Ÿç”Ÿå¹³1.mp4" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
            </video>
        </div>
    </div>

    <!-- ä¿ç•™çš„å›¾è¡¨æ—¶é—´è½´ -->
    <div class="section-box" id="timeline-container">
        <h2>å®‹åº”æ˜Ÿç”Ÿæ´»å¹´ä»£å¯¹åº”å†å²äº‹ä»¶</h2>
        <div id="timeline-chart" style="height: 250px;"></div>
    </div>

    <div class="section-box" id="grain-info-container">
        <h2>ç¨»è°·ç»¼åˆä¿¡æ¯è¡¨</h2>
        <table>
            <tr><th>åˆ†ç±»</th><th>è¯¦æƒ…</th></tr>
            <tr>
                <td>ç¨»è°·ç±»å‹</td>
                <td>ä¸ç²˜ç¨»è°·ï¼ˆåç§°ï¼šäº¢ï¼Œäº§å‡ºçš„ç±³ä¸ºç²³ç±³ï¼‰<br>---<br>ç²˜ç¨»è°·ï¼ˆåç§°ï¼šä½™ï¼Œäº§å‡ºçš„ç±³ä¸ºç³¯ç±³ï¼‰<br>---<br>æ™šæ”¶å¸¦ç²˜æ€§ç¨»è°·ï¼ˆåç§°ï¼šç²³ç¨»ï¼Œä¸èƒ½ç”¨äºé…¿é…’ï¼Œåªèƒ½ç”¨æ¥ç…®ç²¥ï¼‰</td>
            </tr>
            <tr>
                <td>ç¨»è°·å½¢æ€</td>
                <td>é•¿èŠ’ã€çŸ­èŠ’ã€é•¿ç²’ã€å°–ç²’ã€åœ†é¡¶ã€æ‰åœ†</td>
            </tr>
            <tr>
                <td>ç¨»ç±³é¢œè‰²</td>
                <td>
                    <span class="color-box" style="background-color: #ffffff;"></span>é›ªç™½<br>
                    <span class="color-box" style="background-color: #f0e68c;"></span>ç‰™é»„<br>
                    <span class="color-box" style="background-color: #ff4500;"></span>å¤§èµ¤<br>
                    <span class="color-box" style="background-color: #800080;"></span>åŠç´«<br>
                    <span class="color-box" style="background-color: #000000;"></span>æ‚é»‘
                </td>
            </tr>
        </table>
    </div>

    <!-- æ°´ç¨»è§†é¢‘èƒŒæ™¯ -->
    <video class="rice-video-background" autoplay muted loop>
        <source src="second/æ°´ç¨».mp4" type="video/mp4">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
    </video>

    <div class="section-box" id="piechart-container">
        <h2>è°·ç‰©å æ¯”é¥¼å›¾</h2>
        <canvas id="grainChart"></canvas>

        <!-- æ–°å¢çš„åˆ†åˆ—æ–‡å­— -->
        <div class="column-text">
            <div class="text-column">ä»Šå¤©ä¸‹è‚²æ°‘äººè€…ï¼Œ</div>
            <div class="text-column">ç¨»å±…åä¸ƒï¼Œ</div>
            <div class="text-column">è€Œæ¥ã€ç‰Ÿã€é»ã€ç¨·å±…åä¸‰</div>
        </div>
    </div>
</div>

<script>
    // å®‹åº”æ˜Ÿç”Ÿå¹³æ—¶é—´è½´æ•°æ®
    const lifeData = [
        { year: "1587å¹´", event: "å‡ºç”Ÿ", value: 0 },
        { year: "1590å¹´", event: "å¼ å±…æ­£æ”¹é©å,å…šäº‰åŠ å‰§", value: 3 },
        { year: "1616å¹´", event: "åŠªå°”å“ˆèµ¤å»ºç«‹åé‡‘æ”¿æƒ", value: 29 },
        { year: "1619å¹´", event: "è¨å°”æµ’ä¹‹æˆ˜", value: 32 },
        { year: "1637å¹´", event: "æ­¤æ—¶é—´é™„è¿‘è‘—ã€Šå¤©å·¥å¼€ç‰©ã€‹", value: 50 },
        { year: "1644å¹´", event: "æ˜æœç­äº¡", value: 57 },
        { year: "1666å¹´", event: "é€ä¸–(æœªè€ƒè¯ï¼Œä¸ºä¸€æ¨æµ‹)", value: 79 }
    ];

    // åˆå§‹åŒ–æ—¶é—´è½´å›¾è¡¨
    const chart = echarts.init(document.getElementById('timeline-chart'));
    chart.setOption({
        tooltip: { 
            trigger: 'item',
            formatter: (params) => {
                const eventData = lifeData.find(d => d.year === params.name);
                return `${"çº¦" + params.name}<br>äº‹ä»¶ï¼š${eventData.event}`;
            }
        },
        xAxis: {
            type: 'category',
            name: 'å†å²æ—¶é—´è½´',  // æ–°å¢xè½´åç§°
            nameLocation: 'center',
            nameGap: 30,
            data: lifeData.map(d => d.year),
            axisLabel: {
                rotate: 45,
                formatter: function (value, index) {
                    return `${value}\n${lifeData[index].event}`;
                }
            }
        },

        yAxis: { 
            show: true,  // ä¿®æ”¹ä¸ºæ˜¾ç¤ºyè½´
            name: 'ç”Ÿæ´»å¹´ä»£å¯¹åº”å†å²äº‹ä»¶',  // æ–°å¢yè½´åç§°
            nameTextStyle: {
                color: '#666',
                fontSize: 12,
                padding: [0, 0, 10, 0]
            },
            type: 'value',
            axisLine: {
                lineStyle: {
                    color: '#2b5b84',
                    width: 2
                }
            },
            axisLabel: {
                color: '#666',
                fontSize: 12,
                formatter: '{value} å¹´'
            },
            splitLine: {
                show: true,
                lineStyle: {
                    color: '#eee',
                    type: 'dashed'
                }
            }
        },
        series: [{
            type: 'line',
            data: lifeData.map(d => d.value),
            smooth: true,
            lineStyle: { color: '#2b5b84', width: 3 },
            itemStyle: { color: '#2b5b84' },
            symbolSize: 12
        }]
    });

    // é¥¼å›¾é…ç½®
    const ctx = document.getElementById('grainChart').getContext('2d');
    const grainChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['ç¨»', 'æ¥ã€ç‰Ÿã€é»ã€ç¨·'],
            datasets: [{
                data: [70, 30],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.8)',
                    'rgba(54, 162, 235, 0.8)'
                ]
            }]
        },
        options: {
            aspectRatio: 0.65, 
            plugins: { 
                legend: { position: 'top' },
                tooltip: { 
                    callbacks: { 
                        label: ctx => `${ctx.label}: ${ctx.raw}%` 
                    }
                }
            }
        }
    });

    // å“åº”å¼è°ƒæ•´
    window.onresize = () => {
        chart.resize();
        grainChart.resize();
    };

    function loopTextAnimation() {
        const columns = document.querySelectorAll('.text-column');
        let current = 0;
        
        function animate() {
            // éšè—æ‰€æœ‰åˆ—
            columns.forEach(col => col.style.opacity = '0');
            
            // æ˜¾ç¤ºå½“å‰åˆ—
            columns[current].style.opacity = '1';
            
            // æ›´æ–°ç´¢å¼•å¹¶è®¾ç½®ä¸‹æ¬¡åŠ¨ç”»
            current = (current + 1) % columns.length;
            setTimeout(animate, 2000);  // æ¯2ç§’åˆ‡æ¢ä¸€æ¬¡
        }
        
        animate(); // å¯åŠ¨åŠ¨ç”»
    }
    
    // ç«‹å³å¯åŠ¨å¹¶æ— é™å¾ªç¯
    loopTextAnimation();
</script>
</body>
</html>